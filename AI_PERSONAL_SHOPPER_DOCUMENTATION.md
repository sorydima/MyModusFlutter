# AI-–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –®–æ–ø–ø–µ—Ä - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìã –û–±–∑–æ—Ä

AI-–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π –®–æ–ø–ø–µ—Ä - —ç—Ç–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä–∞—è –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ç–æ–≤–∞—Ä–æ–≤. –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–∏–±–æ–ª–µ–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π.

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

1. **–ê–Ω–∞–ª–∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π**
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
   - –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–∫—É–ø–æ–∫
   - –ò–∑—É—á–µ–Ω–∏–µ –≤–∏—à–ª–∏—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π

2. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**
   - AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
   - –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (–ª–∏—á–Ω—ã–µ, —Ç—Ä–µ–Ω–¥–æ–≤—ã–µ, –ø–æ—Ö–æ–∂–∏–µ, —Å–∫–∏–¥–∫–∏)
   - –°–∫–æ—Ä–∏–Ω–≥ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π (0-1)
   - –û–±—ä—è—Å–Ω–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

3. **–£–º–Ω—ã–π –≤–∏—à–ª–∏—Å—Ç**
   - –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤
   - –¶–µ–Ω–æ–≤—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
   - –ó–∞–º–µ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –∏–Ω—Å–∞–π—Ç—ã**
   - –ê–Ω–∞–ª–∏–∑ —ç–≤–æ–ª—é—Ü–∏–∏ —Å—Ç–∏–ª—è
   - –ê–Ω–∞–ª–∏–∑ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ —Ç—Ä–∞—Ç
   - –°–µ–∑–æ–Ω–Ω—ã–µ —Ç—Ä–µ–Ω–¥—ã
   - –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

5. **Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - –ù–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –¶–µ–Ω–æ–≤—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è
   - –¢—Ä–µ–Ω–¥–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### Backend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
backend/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ models.dart                          # –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ai_personal_shopper_service.dart # –û—Å–Ω–æ–≤–Ω–æ–π AI-—Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îî‚îÄ‚îÄ handlers/
‚îÇ       ‚îî‚îÄ‚îÄ ai_personal_shopper_handler.dart # API endpoints
‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îî‚îÄ‚îÄ 008_ai_personal_shopper.sql         # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îî‚îÄ‚îÄ bin/
    ‚îî‚îÄ‚îÄ server.dart                         # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–µ—Ä–≤–µ—Ä
```

### Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
frontend/
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ personal_shopper_service.dart   # API –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ notification_service.dart       # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ providers/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ personal_shopper_provider.dart  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
‚îÇ   ‚îî‚îÄ‚îÄ screens/
‚îÇ       ‚îú‚îÄ‚îÄ personal_shopper_screen.dart    # –û—Å–Ω–æ–≤–Ω–æ–π —ç–∫—Ä–∞–Ω
‚îÇ       ‚îî‚îÄ‚îÄ notifications_screen.dart       # –≠–∫—Ä–∞–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
‚îî‚îÄ‚îÄ pubspec.yaml                           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

1. **user_preferences** - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
2. **user_product_views** - –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ —Ç–æ–≤–∞—Ä–æ–≤
3. **user_purchases** - –ò—Å—Ç–æ—Ä–∏—è –ø–æ–∫—É–ø–æ–∫
4. **user_wishlist** - –°–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
5. **ai_recommendations** - AI-—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
6. **user_trend_analysis** - –ê–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–ª—è

#### user_preferences
```sql
- category_preferences: JSONB    # –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Å –≤–µ—Å–∞–º–∏
- brand_preferences: JSONB       # –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –±—Ä–µ–Ω–¥—ã
- price_range: JSONB            # –î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω
- preferred_marketplaces: TEXT[] # –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ–º—ã–µ –ø–ª–æ—â–∞–¥–∫–∏
- budget_monthly: INTEGER        # –ú–µ—Å—è—á–Ω—ã–π –±—é–¥–∂–µ—Ç
```

#### ai_recommendations
```sql
- recommendation_score: DECIMAL   # –°–∫–æ—Ä —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (0-1)
- recommendation_reasons: JSONB   # –ü—Ä–∏—á–∏–Ω—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- recommendation_type: TEXT       # –¢–∏–ø ('personal', 'trending', etc.)
- expires_at: TIMESTAMP          # –ö–æ–≥–¥–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç
```

## üîß API Endpoints

### –ë–∞–∑–æ–≤—ã–π URL: `/api/personal-shopper`

#### –ü—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /preferences/{userId}` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- `POST /preferences/{userId}` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
- `POST /preferences/{userId}/analyze` - –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- `GET /recommendations/{userId}` - –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- `POST /recommendations/{userId}/generate` - –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–µ
- `POST /recommendations/{recId}/viewed` - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—É—é
- `POST /recommendations/{recId}/clicked` - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –Ω–∞–∂–∞—Ç—É—é
- `POST /recommendations/{recId}/purchased` - –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –∫—É–ø–ª–µ–Ω–Ω—É—é

#### –í–∏—à–ª–∏—Å—Ç
- `GET /wishlist/{userId}` - –ü–æ–ª—É—á–∏—Ç—å –≤–∏—à–ª–∏—Å—Ç
- `POST /wishlist/{userId}` - –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä
- `DELETE /wishlist/{userId}/{productId}` - –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä
- `PUT /wishlist/{userId}/{productId}` - –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–≤–∞—Ä

#### –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- `POST /activity/view` - –ó–∞–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
- `POST /activity/purchase` - –ó–∞–ø–∏—Å–∞—Ç—å –ø–æ–∫—É–ø–∫—É

#### –ê–Ω–∞–ª–∏—Ç–∏–∫–∞
- `GET /trends/{userId}/{analysisType}` - –ü–æ–ª—É—á–∏—Ç—å –∞–Ω–∞–ª–∏–∑ —Ç—Ä–µ–Ω–¥–æ–≤
- `POST /trends/{userId}/{analysisType}/analyze` - –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–¥—ã
- `GET /stats/{userId}` - –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
- `GET /insights/{userId}` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Å–∞–π—Ç—ã

## ü§ñ –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

```dart
double score = 0.0;

// 30% - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
score += categoryPreferenceWeight * 0.3;

// 25% - –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ –±—Ä–µ–Ω–¥–∞–º
score += brandPreferenceWeight * 0.25;

// 20% - —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ü–µ–Ω–æ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
score += priceRangeMatch * 0.2;

// 15% - —Ä–µ–π—Ç–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
score += (productRating / 5.0) * 0.15;

// 10% - —Å–∫–∏–¥–∫–∞ —Ç–æ–≤–∞—Ä–∞
score += min(productDiscount / 100.0, 0.1);

// –ë–æ–Ω—É—Å –∑–∞ –Ω–æ–≤–∏–∑–Ω—É (–¥–æ 5%)
if (daysSinceCreated <= 7) score += 0.05;

return min(score, 1.0);
```

### –¢–∏–ø—ã —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

1. **personal** - –ù–∞ –æ—Å–Ω–æ–≤–µ –ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π
2. **trending** - –¢—Ä–µ–Ω–¥–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã
3. **similar** - –ü–æ—Ö–æ–∂–∏–µ –Ω–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ
4. **price_drop** - –¢–æ–≤–∞—Ä—ã —Å–æ —Å–∫–∏–¥–∫–∞–º–∏

## üì± –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤–æ Frontend

### –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è

```dart
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
final personalShopperProvider = PersonalShopperProvider();
await personalShopperProvider.initializeForUser(userId);

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
final notificationService = NotificationService();
await notificationService.initialize();
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

```dart
// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
final recommendations = await personalShopperService.getPersonalRecommendations(
  userId,
  category: '–û–¥–µ–∂–¥–∞',
  limit: 20,
);

// –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
final newRecommendations = await personalShopperService.generateRecommendations(
  userId,
  limit: 20,
);
```

### –†–∞–±–æ—Ç–∞ —Å –≤–∏—à–ª–∏—Å—Ç–æ–º

```dart
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –≤–∏—à–ª–∏—Å—Ç
await personalShopperService.addToWishlist(
  userId,
  product,
  priority: 5,
  priceAlertThreshold: 5000,
  notes: '–•–æ—á—É –∫—É–ø–∏—Ç—å –∫ –ù–æ–≤–æ–º—É –≥–æ–¥—É',
);

// –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–∏—à–ª–∏—Å—Ç–∞
final wishlist = await personalShopperService.getWishlist(userId);
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

```dart
// –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
await notificationService.notifyNewRecommendations(userId, recommendations);

// –¶–µ–Ω–æ–≤–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ
await notificationService.notifyPriceAlert(userId, item, oldPrice, newPrice);
```

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### Backend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
   ```bash
   dart run backend/bin/migrate.dart
   ```

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
   ```env
   AI_API_KEY=your_ai_api_key
   DATABASE_URL=postgresql://...
   ```

### Frontend –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

1. **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```yaml
   dependencies:
     flutter_local_notifications: ^16.3.0
     http: ^1.1.0
     provider: ^6.1.1
   ```

2. **–†–∞–∑—Ä–µ—à–µ–Ω–∏—è (Android)**
   ```xml
   <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
   <uses-permission android:name="android.permission.VIBRATE" />
   ```

## üîÑ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ProductCard

```dart
ProductCard(
  product: recommendation.toProduct(),
  onTap: () {
    // –û—Ç–º–µ—á–∞–µ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é –∫–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—É—é
    personalShopperService.markRecommendationViewed(recommendation.id);
    
    // –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä —Ç–æ–≤–∞—Ä–∞
    personalShopperService.recordProductView(userId, product);
  },
  onFavorite: () {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –≤–∏—à–ª–∏—Å—Ç
    personalShopperService.addToWishlist(userId, product);
  },
)
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π

```dart
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞ –≤ —Ä–æ—É—Ç–µ—Ä
GoRoute(
  path: '/personal-shopper',
  builder: (context, state) => const PersonalShopperScreen(),
),

GoRoute(
  path: '/notifications',
  builder: (context, state) => const NotificationsScreen(),
),
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏

1. **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π**
   - CTR (Click Through Rate)
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –ø–æ–∫—É–ø–∫–∏
   - –í—Ä–µ–º—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

2. **–ö–∞—á–µ—Å—Ç–≤–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π**
   - –¢–æ—á–Ω–æ—Å—Ç—å –∞–Ω–∞–ª–∏–∑–∞
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Å–æ–≤
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å

3. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
   - –û—Ç–∫—Ä—ã–≤–∞–µ–º–æ—Å—Ç—å
   - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞
   - –û—Ç–ø–∏—Å–∫–∏

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

```dart
// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
logger.i('Generated ${recommendations.length} recommendations for user: $userId');

// –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫
logger.e('Error generating recommendations: $e', error: e, stackTrace: stackTrace);
```

## üö¶ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Unit —Ç–µ—Å—Ç—ã

```dart
// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞
test('should generate personal recommendations', () async {
  final service = AIPersonalShopperService(db: mockDb, aiService: mockAi);
  final recommendations = await service.generatePersonalRecommendations('user123');
  expect(recommendations.length, greaterThan(0));
});
```

### Integration —Ç–µ—Å—Ç—ã

```dart
// –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
testWidgets('should display recommendations', (tester) async {
  await tester.pumpWidget(MyApp());
  await tester.tap(find.text('–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π —à–æ–ø–ø–µ—Ä'));
  await tester.pumpAndSettle();
  expect(find.byType(ProductCard), findsWidgets);
});
```

## üîÆ –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –§–∞–∑–∞ 2: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- [ ] –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–æ–≤–∞—Ä–æ–≤
- [ ] –ì–æ–ª–æ—Å–æ–≤–æ–π –ø–æ–∏—Å–∫
- [ ] AR-–ø—Ä–∏–º–µ—Ä–∫–∞
- [ ] –°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –§–∞–∑–∞ 3: ML —É–ª—É—á—à–µ–Ω–∏—è
- [ ] –ì–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ
- [ ] –ö–æ–ª–ª–∞–±–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- [ ] –ê–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- [ ] –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Ç—Ä–µ–Ω–¥–æ–≤

### –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- [ ] –ü–æ–≥–æ–¥–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–æ—Ü—Å–µ—Ç—è–º–∏
- [ ] –ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º –∏–ª–∏ –≤–æ–ø—Ä–æ—Å–æ–≤:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
4. –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –º–æ–¥—É–ª—å —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞ MyModus –∏ –ø–æ–¥—á–∏–Ω—è–µ—Ç—Å—è –æ–±—â–µ–π –ª–∏—Ü–µ–Ω–∑–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: $(date)*
